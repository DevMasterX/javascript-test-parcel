{"mappings":"C,A,W,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,I,E,E,S,E,E,SCkJM,EAAa,SAAS,aAAa,CAAC,cACpC,EAAa,SAAS,aAAa,CAAC,WAC7B,SAAS,aAAa,CAAC,YACpC,IAAM,EAAgB,SAAS,aAAa,CAAC,sBA2B9B,SAAA,IAAA,MAAA,AAAA,CAAA,EAAf,AAAA,CAAA,EAAA,EAAA,CAAA,AAAA,EAAA,SAA4B,CAAG,E,M,A,C,E,E,W,A,E,I,C,S,C,E,O,E,K,E,K,EACP,IAAA,EAOT,MAAA,C,EAAM,QAAQ,UAAU,CAPvB,EAAI,GAAG,EAAC,EAAA,AAAA,CAAA,EAAA,EAAA,CAAA,AAAA,EAAA,SAAM,CAAN,EACd,IAAA,E,M,A,C,E,E,W,A,E,I,C,S,C,E,O,E,K,E,K,EAAO,MAAA,C,EAAM,MAAO,uCAA2C,MAAA,CAAL,I,A,M,EAChE,GAAI,CAAC,AADC,CAAA,EAAO,EAAP,IAAA,EAAA,EACI,EAAE,CACV,MAAM,AAAI,QAEZ,MAAA,C,EAAO,EAAK,IAAI,G,A,C,EAClB,GAN4B,SAAA,CAAA,E,O,E,K,C,I,C,U,K,A,M,EAa5B,MAAA,C,EAJmB,AAFN,EAAP,IAAA,GAGH,MAAM,CAAC,SADJ,CAAA,EACoB,MAAA,AAAW,cAAxB,EAAA,MAAA,AACV,GAAA,GAAG,CAAC,SAAJ,CAAA,EAAmB,OAAA,AAAZ,EAAA,KAAA,AAAiB,CAAC,EAAE,A,G,A,C,EAGhC,EAAA,EAfe,KAAA,CAAA,IAAA,CAAA,U,CAiBA,SAAA,IAAA,MAAA,AAAA,CAAA,EAAf,AAAA,CAAA,EAAA,EAAA,CAAA,AAAA,EAAA,SAA0B,CAAG,EACrB,IAAA,EACA,EAoBA,E,M,A,C,E,E,W,A,E,I,C,S,C,E,O,E,K,E,K,EAlBgB,IAAA,EAgBT,OAnBP,EAAW,gCACX,EAAU,kCAkBH,C,EAAM,QAAQ,UAAU,CAhBvB,EAAI,GAAG,EAAC,EAAA,AAAA,CAAA,EAAA,EAAA,CAAA,AAAA,EAAA,SAAM,CAAN,EACd,IAAA,EAMA,E,M,A,C,E,E,W,A,E,I,C,S,C,E,O,E,K,E,K,EAAO,OANP,EAAS,IAAI,gBAAgB,CACjC,IAAK,EACL,EAAG,EACH,KAAM,IACR,GAEa,C,EAAM,MAAO,GAA2B,MAAA,CAAzB,EAAS,kBAAuB,MAAA,CAAP,I,A,M,EAErD,GAAI,CAAC,AAFC,CAAA,EAAO,EAAP,IAAA,EAAA,EAEI,EAAE,CACV,MAAM,AAAI,MAAM,EAAK,UAAU,EAGjC,MAAA,C,EAAO,EAAK,IAAI,G,A,C,EAClB,GAd4B,SAAA,CAAA,E,O,E,K,C,I,C,U,K,A,M,EAwB5B,OAFA,QAAQ,GAAG,CAJL,EAAO,AAFA,EAAP,IAAA,GAGH,MAAM,CAAC,SADJ,CAAA,EACoB,MAAA,AAAW,cAAxB,EAAA,MAAA,AACV,GAAA,GAAG,CAAC,SAAJ,CAAA,EAAmB,OAAA,AAAZ,EAAA,KAAA,CAAkB,OAAO,A,IAInC,C,EAAO,E,A,C,EACT,EAAA,EA7Be,KAAA,CAAA,IAAA,CAAA,U,CA1Cf,EAAW,gBAAgB,CAAC,QAE5B,WAEE,EAAc,kBAAkB,CAAC,YADlB,sCAEjB,GAEA,EAAW,gBAAgB,CAAC,SAE5B,SAAqB,CAAG,EAQd,IAAA,EAPR,EAAI,cAAc,GAMlB,AASa,CAAA,SAAa,CAAG,EAAhB,OAAA,EAAA,KAAA,CAAA,IAAA,CAAA,U,C,EAbD,AADC,IAAI,SAAS,EAAI,aAAa,EAExC,MAAM,CAAC,WACP,MAAM,CAAC,SAAA,CAFV,EAEkB,OAAA,CACf,GAAA,GAAG,CAAC,SAAA,CAAJ,EAAY,OAAA,EAAK,IAAI,E,IAErB,IAAI,EAAC,EAAA,AAAA,CAAA,EAAA,EAAA,CAAA,AAAA,EAAA,SAAM,CAAN,E,M,A,C,E,E,W,A,E,I,C,S,C,E,O,E,K,E,K,EAEmB,MAAA,C,EAAM,AAuBpB,SAAW,CAAG,EAAd,OAAA,EAAA,KAAA,CAAA,IAAA,CAAA,U,EAxBQ,EAAK,GAAG,CAAC,SAApB,CAAA,EAAqC,OAAA,AAAd,EAAA,OAAA,AAAqB,CAAC,EAAE,A,I,A,M,E,OAErD,QAAQ,GAAG,CAAC,gCADW,EAAjB,IAAA,I,C,E,A,C,EAER,GAJY,SAAA,CAAA,E,O,E,K,C,I,C,U,IAKX,KAAK,CAAC,SAAA,CAAN,EAAW,OAAA,QAAQ,GAAG,CAAC,E,EAC5B,E","sources":["<anon>","src/js/async-await.js"],"sourcesContent":["(function () {\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire94c2\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire94c2\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $i7mVp = parcelRequire(\"i7mVp\");\n\nvar $4tSb9 = parcelRequire(\"4tSb9\");\nvar $0d5a634b216ddd29$var$BASE_URL = 'http://localhost:3000';\nfunction $0d5a634b216ddd29$var$getCapital() {\n    return $0d5a634b216ddd29$var$_getCapital.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$_getCapital() {\n    $0d5a634b216ddd29$var$_getCapital = // --------------GET---------------------------------\n    // если обрабатываем http запрос только внутри ф - ции и не важно\n    // что - то возвращать с данной ф - ции => используем try...catch\n    (0, $i7mVp._)(function() {\n        var URL, resp, data, e;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    _state.trys.push([\n                        0,\n                        3,\n                        ,\n                        4\n                    ]);\n                    URL = 'https://restcountries.com/v3.1/';\n                    return [\n                        4,\n                        fetch(\"\".concat(URL, \"Ukraine\"))\n                    ];\n                case 1:\n                    resp = _state.sent();\n                    if (!resp.ok) throw new Error(resp.statusText);\n                    return [\n                        4,\n                        resp.json()\n                    ];\n                case 2:\n                    data = _state.sent();\n                    console.log(data);\n                    return [\n                        3,\n                        4\n                    ];\n                case 3:\n                    e = _state.sent();\n                    console.log(e);\n                    return [\n                        3,\n                        4\n                    ];\n                case 4:\n                    return [\n                        2\n                    ];\n            }\n        });\n    });\n    return $0d5a634b216ddd29$var$_getCapital.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$getCapital() {\n    return $0d5a634b216ddd29$var$_getCapital1.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$_getCapital1() {\n    $0d5a634b216ddd29$var$_getCapital1 = // когда с данными работаем за пределами ф - ции =>\n    // используем.then().catch();\n    (0, $i7mVp._)(function() {\n        var URL, resp;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    URL = 'https://restcountries.com/v3.1/';\n                    return [\n                        4,\n                        fetch(\"\".concat(URL, \"Ukraine\"))\n                    ];\n                case 1:\n                    resp = _state.sent();\n                    if (!resp.ok) throw new Error(resp.statusText);\n                    return [\n                        2,\n                        resp.json\n                    ];\n            }\n        });\n    });\n    return $0d5a634b216ddd29$var$_getCapital1.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$fetchBooks() {\n    return $0d5a634b216ddd29$var$_fetchBooks.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$_fetchBooks() {\n    $0d5a634b216ddd29$var$_fetchBooks = // getCapital()\n    //   .then(data => console.log(data))\n    //   .catch(error => console.log(error));\n    // ----------------------------------------------\n    (0, $i7mVp._)(function() {\n        var response, books;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    return [\n                        4,\n                        fetch(\"\".concat($0d5a634b216ddd29$var$BASE_URL, \"/books\"))\n                    ];\n                case 1:\n                    response = _state.sent();\n                    return [\n                        4,\n                        response.json()\n                    ];\n                case 2:\n                    books = _state.sent();\n                    return [\n                        2,\n                        books\n                    ];\n            }\n        });\n    });\n    return $0d5a634b216ddd29$var$_fetchBooks.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$fetchBookById(bookId) {\n    return $0d5a634b216ddd29$var$_fetchBookById.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$_fetchBookById() {\n    $0d5a634b216ddd29$var$_fetchBookById = (0, $i7mVp._)(function(bookId) {\n        var response, book;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    return [\n                        4,\n                        fetch(\"\".concat($0d5a634b216ddd29$var$BASE_URL, \"/books/\").concat(bookId))\n                    ];\n                case 1:\n                    response = _state.sent();\n                    return [\n                        4,\n                        response.json()\n                    ];\n                case 2:\n                    book = _state.sent();\n                    return [\n                        2,\n                        book\n                    ];\n            }\n        });\n    });\n    return $0d5a634b216ddd29$var$_fetchBookById.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$addBook(book) {\n    return $0d5a634b216ddd29$var$_addBook.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$_addBook() {\n    $0d5a634b216ddd29$var$_addBook = // ---------------------POST----------------------\n    (0, $i7mVp._)(function(book) {\n        var options, response, newBook;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    options = {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify(book)\n                    };\n                    return [\n                        4,\n                        fetch(\"\".concat($0d5a634b216ddd29$var$BASE_URL, \"/books/13\"), options)\n                    ];\n                case 1:\n                    response = _state.sent();\n                    return [\n                        4,\n                        response.json()\n                    ];\n                case 2:\n                    newBook = _state.sent();\n                    return [\n                        2,\n                        new Book()\n                    ];\n            }\n        });\n    });\n    return $0d5a634b216ddd29$var$_addBook.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$removeBook(bookId) {\n    return $0d5a634b216ddd29$var$_removeBook.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$_removeBook() {\n    $0d5a634b216ddd29$var$_removeBook = // ---------------------DELETE---------------------\n    (0, $i7mVp._)(function(bookId) {\n        var url, options, response, book;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    url = \"\".concat($0d5a634b216ddd29$var$BASE_URL, \"/books/\").concat(bookId);\n                    options = {\n                        method: 'DELETE'\n                    };\n                    return [\n                        4,\n                        fetch(url, options)\n                    ];\n                case 1:\n                    response = _state.sent();\n                    return [\n                        4,\n                        response.json()\n                    ];\n                case 2:\n                    book = _state.sent();\n                    return [\n                        2,\n                        book\n                    ];\n            }\n        });\n    });\n    return $0d5a634b216ddd29$var$_removeBook.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$updateBookById(update, bookId) {\n    return $0d5a634b216ddd29$var$_updateBookById.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$_updateBookById() {\n    $0d5a634b216ddd29$var$_updateBookById = // ---------------------PUT/PATCH----------------------\n    (0, $i7mVp._)(function(update, bookId) {\n        var options, response, book;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    options = {\n                        method: 'PATCH',\n                        headers: {\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify(update)\n                    };\n                    return [\n                        4,\n                        fetch(\"\".concat($0d5a634b216ddd29$var$BASE_URL, \"/books/\").concat(bookId), options)\n                    ];\n                case 1:\n                    response = _state.sent();\n                    return [\n                        4,\n                        response.json()\n                    ];\n                case 2:\n                    book = _state.sent();\n                    return [\n                        2,\n                        book\n                    ];\n            }\n        });\n    });\n    return $0d5a634b216ddd29$var$_updateBookById.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$addAndRenderBook() {\n    return $0d5a634b216ddd29$var$_addAndRenderBook.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$_addAndRenderBook() {\n    $0d5a634b216ddd29$var$_addAndRenderBook = // ------------------USAGE--------------------------------------\n    (0, $i7mVp._)(function() {\n        var book, error;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    _state.trys.push([\n                        0,\n                        2,\n                        ,\n                        3\n                    ]);\n                    return [\n                        4,\n                        $0d5a634b216ddd29$var$addBook({})\n                    ];\n                case 1:\n                    book = _state.sent();\n                    console.log(book);\n                    return [\n                        3,\n                        3\n                    ];\n                case 2:\n                    error = _state.sent();\n                    console.log(error);\n                    return [\n                        3,\n                        3\n                    ];\n                case 3:\n                    return [\n                        2\n                    ];\n            }\n        });\n    });\n    return $0d5a634b216ddd29$var$_addAndRenderBook.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$getCapital1() {\n    return $0d5a634b216ddd29$var$_getCapital11.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$_getCapital11() {\n    $0d5a634b216ddd29$var$_getCapital11 = // ---------------------------------------------\n    // ----------------ПАРАЛЛЕЛЬНЫЕ ЗАПРОСЫ---------------------\n    (0, $i7mVp._)(function() {\n        var URL, arr, responses, prom;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    URL = 'https://restcountries.com/v3.1/name/';\n                    arr = [\n                        'Ukraine',\n                        'France',\n                        'Germany'\n                    ];\n                    responses = arr.map(/*#__PURE__*/ function() {\n                        var _ref = (0, $i7mVp._)(function(country) {\n                            var response;\n                            return (0, $4tSb9.__generator)(this, function(_state) {\n                                switch(_state.label){\n                                    case 0:\n                                        return [\n                                            4,\n                                            fetch(\"\".concat(URL).concat(country))\n                                        ];\n                                    case 1:\n                                        response = _state.sent();\n                                        if (!response.ok) throw new Error('Not found');\n                                        return [\n                                            2,\n                                            response.json()\n                                        ];\n                                }\n                            });\n                        });\n                        return function(country) {\n                            return _ref.apply(this, arguments);\n                        };\n                    }());\n                    return [\n                        4,\n                        Promise.allSettled(responses)\n                    ];\n                case 1:\n                    prom = _state.sent();\n                    return [\n                        2,\n                        prom\n                    ];\n            }\n        });\n    });\n    return $0d5a634b216ddd29$var$_getCapital11.apply(this, arguments);\n}\n// getCapital1()\n//   .then(data => {\n//     const res = data\n//       .filter(({ status }) => status === 'fulfilled')\n//       .map(({ value }) => value[0]);\n//     const rej = data.filter(({ status }) => status === 'rejected');\n//   })\n//   .catch(error => console.log(error));\n// ---------------------------------------------\nvar $0d5a634b216ddd29$var$searchForm = document.querySelector('.js-search');\nvar $0d5a634b216ddd29$var$addCountry = document.querySelector('.js-add');\nvar $0d5a634b216ddd29$var$list = document.querySelector('.js-list');\nvar $0d5a634b216ddd29$var$formContainer = document.querySelector('.js-form-container');\n$0d5a634b216ddd29$var$addCountry.addEventListener('click', $0d5a634b216ddd29$var$handlerAddInput);\nfunction $0d5a634b216ddd29$var$handlerAddInput() {\n    var markup = '<input type=\"text\" name=\"country\"/>';\n    $0d5a634b216ddd29$var$formContainer.insertAdjacentHTML('beforeend', markup);\n}\n$0d5a634b216ddd29$var$searchForm.addEventListener('submit', $0d5a634b216ddd29$var$handlerForm);\nfunction $0d5a634b216ddd29$var$handlerForm(evt) {\n    evt.preventDefault();\n    var data = new FormData(evt.currentTarget);\n    var arr = data.getAll('country').filter(function(item) {\n        return item;\n    }).map(function(item) {\n        return item.trim();\n    });\n    $0d5a634b216ddd29$var$getCountries(arr).then(/*#__PURE__*/ function() {\n        var _ref = (0, $i7mVp._)(function(resp) {\n            var capitals, weatherService;\n            return (0, $4tSb9.__generator)(this, function(_state) {\n                switch(_state.label){\n                    case 0:\n                        capitals = resp.map(function(param) {\n                            var capital = param.capital;\n                            return capital[0];\n                        });\n                        return [\n                            4,\n                            $0d5a634b216ddd29$var$getWeather(capitals)\n                        ];\n                    case 1:\n                        weatherService = _state.sent();\n                        console.log(\"\\uD83D\\uDE80  weatherService:\", weatherService);\n                        return [\n                            2\n                        ];\n                }\n            });\n        });\n        return function(resp) {\n            return _ref.apply(this, arguments);\n        };\n    }()).catch(function(e) {\n        return console.log(e);\n    });\n}\nfunction $0d5a634b216ddd29$var$getCountries(arr) {\n    return $0d5a634b216ddd29$var$_getCountries.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$_getCountries() {\n    $0d5a634b216ddd29$var$_getCountries = (0, $i7mVp._)(function(arr) {\n        var resps, data, countryObj;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    resps = arr.map(/*#__PURE__*/ function() {\n                        var _ref = (0, $i7mVp._)(function(item) {\n                            var resp;\n                            return (0, $4tSb9.__generator)(this, function(_state) {\n                                switch(_state.label){\n                                    case 0:\n                                        return [\n                                            4,\n                                            fetch(\"https://restcountries.com/v3.1/name/\".concat(item))\n                                        ];\n                                    case 1:\n                                        resp = _state.sent();\n                                        if (!resp.ok) throw new Error();\n                                        return [\n                                            2,\n                                            resp.json()\n                                        ];\n                                }\n                            });\n                        });\n                        return function(item) {\n                            return _ref.apply(this, arguments);\n                        };\n                    }());\n                    return [\n                        4,\n                        Promise.allSettled(resps)\n                    ];\n                case 1:\n                    data = _state.sent();\n                    countryObj = data.filter(function(param) {\n                        var status = param.status;\n                        return status === 'fulfilled';\n                    }).map(function(param) {\n                        var value = param.value;\n                        return value[0];\n                    });\n                    return [\n                        2,\n                        countryObj\n                    ];\n            }\n        });\n    });\n    return $0d5a634b216ddd29$var$_getCountries.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$getWeather(arr) {\n    return $0d5a634b216ddd29$var$_getWeather.apply(this, arguments);\n}\nfunction $0d5a634b216ddd29$var$_getWeather() {\n    $0d5a634b216ddd29$var$_getWeather = (0, $i7mVp._)(function(arr) {\n        var BASE_URL, API_KEY, resps, data, objs;\n        return (0, $4tSb9.__generator)(this, function(_state) {\n            switch(_state.label){\n                case 0:\n                    BASE_URL = 'https://api.weatherapi.com/v1';\n                    API_KEY = '1f583b8645b54c449e5214937241512';\n                    resps = arr.map(/*#__PURE__*/ function() {\n                        var _ref = (0, $i7mVp._)(function(city) {\n                            var params, resp;\n                            return (0, $4tSb9.__generator)(this, function(_state) {\n                                switch(_state.label){\n                                    case 0:\n                                        params = new URLSearchParams({\n                                            key: API_KEY,\n                                            q: city,\n                                            lang: 'uk'\n                                        });\n                                        return [\n                                            4,\n                                            fetch(\"\".concat(BASE_URL, \"/current.json?\").concat(params))\n                                        ];\n                                    case 1:\n                                        resp = _state.sent();\n                                        if (!resp.ok) throw new Error(resp.statusText);\n                                        return [\n                                            2,\n                                            resp.json()\n                                        ];\n                                }\n                            });\n                        });\n                        return function(city) {\n                            return _ref.apply(this, arguments);\n                        };\n                    }());\n                    return [\n                        4,\n                        Promise.allSettled(resps)\n                    ];\n                case 1:\n                    data = _state.sent();\n                    objs = data.filter(function(param) {\n                        var status = param.status;\n                        return status === 'fulfilled';\n                    }).map(function(param) {\n                        var value = param.value;\n                        return value.current;\n                    });\n                    console.log(objs);\n                    return [\n                        2,\n                        objs\n                    ];\n            }\n        });\n    });\n    return $0d5a634b216ddd29$var$_getWeather.apply(this, arguments);\n}\n\n})();\n//# sourceMappingURL=async-await.8a744be4.js.map\n","const BASE_URL = 'http://localhost:3000';\n\n// --------------GET---------------------------------\n\n// если обрабатываем http запрос только внутри ф - ции и не важно\n// что - то возвращать с данной ф - ции => используем try...catch\n\nasync function getCapital() {\n  try {\n    const URL = 'https://restcountries.com/v3.1/';\n    const resp = await fetch(`${URL}Ukraine`);\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    const data = await resp.json();\n    console.log(data);\n  } catch (e) {\n    console.log(e);\n  }\n}\n\n// когда с данными работаем за пределами ф - ции =>\n// используем.then().catch();\n\nasync function getCapital() {\n  const URL = 'https://restcountries.com/v3.1/';\n  const resp = await fetch(`${URL}Ukraine`);\n  if (!resp.ok) {\n    throw new Error(resp.statusText);\n  }\n  return resp.json;\n}\n\n// getCapital()\n//   .then(data => console.log(data))\n//   .catch(error => console.log(error));\n\n// ----------------------------------------------\n\nasync function fetchBooks() {\n  const response = await fetch(`${BASE_URL}/books`);\n  const books = await response.json();\n\n  return books;\n}\n\nasync function fetchBookById(bookId) {\n  const response = await fetch(`${BASE_URL}/books/${bookId}`);\n  const book = await response.json();\n\n  return book;\n}\n\n// ---------------------POST----------------------\n\nasync function addBook(book) {\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(book),\n  };\n\n  const response = await fetch(`${BASE_URL}/books/13`, options);\n  const newBook = await response.json();\n\n  return new Book();\n}\n\n// ---------------------DELETE---------------------\n\nasync function removeBook(bookId) {\n  const url = `${BASE_URL}/books/${bookId}`;\n  const options = {\n    method: 'DELETE',\n  };\n\n  const response = await fetch(url, options);\n  const book = await response.json();\n\n  return book;\n}\n\n// ---------------------PUT/PATCH----------------------\n\nasync function updateBookById(update, bookId) {\n  const options = {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(update),\n  };\n\n  const response = await fetch(`${BASE_URL}/books/${bookId}`, options);\n  const book = await response.json();\n\n  return book;\n}\n\n// ------------------USAGE--------------------------------------\n\nasync function addAndRenderBook() {\n  try {\n    const book = await addBook({});\n    console.log(book);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// ---------------------------------------------\n\n// ----------------ПАРАЛЛЕЛЬНЫЕ ЗАПРОСЫ---------------------\n\nasync function getCapital1() {\n  const URL = 'https://restcountries.com/v3.1/name/';\n  const arr = ['Ukraine', 'France', 'Germany'];\n\n  const responses = arr.map(async country => {\n    const response = await fetch(`${URL}${country}`);\n\n    if (!response.ok) {\n      throw new Error('Not found');\n      // Promise.reject('Not found');\n    }\n\n    return response.json();\n  });\n\n  const prom = await Promise.allSettled(responses);\n  return prom;\n}\n// getCapital1()\n//   .then(data => {\n//     const res = data\n//       .filter(({ status }) => status === 'fulfilled')\n//       .map(({ value }) => value[0]);\n//     const rej = data.filter(({ status }) => status === 'rejected');\n\n//   })\n//   .catch(error => console.log(error));\n\n// ---------------------------------------------\n\nconst searchForm = document.querySelector('.js-search');\nconst addCountry = document.querySelector('.js-add');\nconst list = document.querySelector('.js-list');\nconst formContainer = document.querySelector('.js-form-container');\n\naddCountry.addEventListener('click', handlerAddInput);\n\nfunction handlerAddInput() {\n  const markup = '<input type=\"text\" name=\"country\"/>';\n  formContainer.insertAdjacentHTML('beforeend', markup);\n}\n\nsearchForm.addEventListener('submit', handlerForm);\n\nfunction handlerForm(evt) {\n  evt.preventDefault();\n  const data = new FormData(evt.currentTarget);\n  const arr = data\n    .getAll('country')\n    .filter(item => item)\n    .map(item => item.trim());\n  getCountries(arr)\n    .then(async resp => {\n      const capitals = resp.map(({ capital }) => capital[0]);\n      const weatherService = await getWeather(capitals);\n      console.log('🚀  weatherService:', weatherService);\n    })\n    .catch(e => console.log(e));\n}\n\nasync function getCountries(arr) {\n  const resps = arr.map(async item => {\n    const resp = await fetch(`https://restcountries.com/v3.1/name/${item}`);\n    if (!resp.ok) {\n      throw new Error();\n    }\n    return resp.json();\n  });\n  const data = await Promise.allSettled(resps);\n\n  const countryObj = data\n    .filter(({ status }) => status === 'fulfilled')\n    .map(({ value }) => value[0]);\n\n  return countryObj;\n}\n\nasync function getWeather(arr) {\n  const BASE_URL = 'https://api.weatherapi.com/v1';\n  const API_KEY = '1f583b8645b54c449e5214937241512';\n\n  const resps = arr.map(async city => {\n    const params = new URLSearchParams({\n      key: API_KEY,\n      q: city,\n      lang: 'uk',\n    });\n\n    const resp = await fetch(`${BASE_URL}/current.json?${params}`);\n\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json();\n  });\n\n  const data = await Promise.allSettled(resps);\n\n  const objs = data\n    .filter(({ status }) => status === 'fulfilled')\n    .map(({ value }) => value.current);\n\n  console.log(objs);\n\n  return objs;\n}\n"],"names":["$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$i7mVp","$4tSb9","$0d5a634b216ddd29$var$searchForm","document","querySelector","$0d5a634b216ddd29$var$addCountry","$0d5a634b216ddd29$var$formContainer","$0d5a634b216ddd29$var$_getCountries","_","arr","__generator","_state","label","_ref","Promise","allSettled","map","item","resp","fetch","concat","sent","ok","json","apply","arguments","data","filter","param","status","value","$0d5a634b216ddd29$var$_getWeather","BASE_URL","API_KEY","objs","city","params","URLSearchParams","key","q","lang","statusText","console","log","current","addEventListener","insertAdjacentHTML","evt","preventDefault","$0d5a634b216ddd29$var$getCountries","FormData","currentTarget","getAll","trim","then","$0d5a634b216ddd29$var$getWeather","capital","catch","e"],"version":3,"file":"async-await.8a744be4.js.map"}